
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Game</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
        import { getDatabase, ref, set, get, onValue } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDmjiA1BmuPaf-MgB9uWPcsYKDpbOLYDcU",
            authDomain: "questionspopo-7a8e6.firebaseapp.com",
            projectId: "questionspopo-7a8e6",
            storageBucket: "questionspopo-7a8e6.appspot.com",
            messagingSenderId: "411558682757",
            appId: "1:411558682757:web:c4c69e01e5c037d9fe89ec",
            measurementId: "G-MRLQNR8602"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const playerId = Math.random().toString(36).substr(2, 9); // Generate a unique player ID
        document.getElementById("playerId").innerText = `Your Player ID: ${playerId}`;

        function submitQuestions() {
            const questions = [];
            for (let i = 1; i <= 5; i++) {
                questions.push(document.getElementById(`question${i}`).value);
            }
            set(ref(db, `players/${playerId}`), {
                questions: questions
            }).then(() => {
                checkBothPlayers();
            });
        }

        function checkBothPlayers() {
            const playersRef = ref(db, 'players');
            onValue(playersRef, (snapshot) => {
                const players = snapshot.val();
                const playerCount = Object.keys(players || {}).length;

                if (playerCount >= 2) {
                    displayQuestions(players);
                } else {
                    document.getElementById("status").innerText = "Waiting for the other player...";
                }
            });
        }

        function displayQuestions(players) {
            const questionsA = players[Object.keys(players)[0]].questions;
            const questionsB = players[Object.keys(players)[1]].questions;

            document.getElementById("status").innerText = "Both players have submitted!";

            let index = 0;

            function showNextQuestion() {
                if (index < 5) {
                    document.getElementById("questionDisplay").innerText = 
                        `Player 1: ${questionsA[index]} | Player 2: ${questionsB[index]}`;
                    index++;
                } else {
                    document.getElementById("questionDisplay").innerText = "No more questions!";
                }
            }

            document.getElementById("nextButton").onclick = showNextQuestion;
            showNextQuestion();
        }

        function resetGame() {
            const playersRef = ref(db, 'players');
            set(playersRef, null); // Clear all player data
            document.getElementById("questionDisplay").innerText = "";
            document.getElementById("status").innerText = "Game reset. Please enter your questions.";
            for (let i = 1; i <= 5; i++) {
                document.getElementById(`question${i}`).value = "";
            }
        }
    </script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #resetButton {
            position: absolute;
            top: 10px;
            left: 10px;
        }
    </style>
</head>
<body>
    <button id="resetButton" onclick="resetGame()">Reset Game</button>
    <h1>Memory Game</h1>
    <p id="playerId"></p>
    <p>Each player will input 5 questions. After submitting, wait for the other player.</p>
    <div>
        <h2>Input Questions:</h2>
        <input type="text" id="question1" placeholder="Question 1" required><br>
        <input type="text" id="question2" placeholder="Question 2" required><br>
        <input type="text" id="question3" placeholder="Question 3" required><br>
        <input type="text" id="question4" placeholder="Question 4" required><br>
        <input type="text" id="question5" placeholder="Question 5" required><br>
        <button onclick="submitQuestions()">Submit Questions</button>
    </div>
    <h2 id="status"></h2>
    <h2>Question Display:</h2>
    <p id="questionDisplay"></p>
    <button id="nextButton">Next Question</button>
</body>
</html>
